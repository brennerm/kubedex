import{d as he,f as _,s as C,a as p,c as ne}from"../chunks/sqOaSQ_m.js";import{b as ge,d as I,t as we,h as xe,a as ke,r as ye,p as je,e as le,s as te,f as l,g as b,i as n,j as o,k as E,m as ce,n as Q,o as ae,q as D}from"../chunks/lPPjIoTW.js";import{p as qe,i as q}from"../chunks/BhVzuEFM.js";import{s as Le,a as Ae,b as Pe,e as se,i as ie,k as V,r as Se,c as Ce}from"../chunks/Bg1Q9AXq.js";function Ee(e,r,a=r){var s=new WeakSet;ge(e,"input",async t=>{var d=t?e.defaultValue:e.value;if(d=ee(e)?re(d):d,a(d),I!==null&&s.add(I),await we(),d!==(d=r())){var m=e.selectionStart,v=e.selectionEnd,c=e.value.length;if(e.value=d??"",v!==null){var f=e.value.length;m===v&&v===c&&f>c?(e.selectionStart=f,e.selectionEnd=f):(e.selectionStart=m,e.selectionEnd=Math.min(v,f))}}}),(xe&&e.defaultValue!==e.value||ke(r)==null&&e.value)&&(a(ee(e)?re(e.value):e.value),I!==null&&s.add(I)),ye(()=>{var t=r();if(e===document.activeElement){var d=je??I;if(s.has(d))return}ee(e)&&t===re(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}function ee(e){var r=e.type;return r==="number"||r==="range"}function re(e){return e===""?null:+e}function W(e){return e.replace("#/definitions/","")}function Me(e,r,a,s,t,d=0,m=10){const v=s.includes(e);if(r.$ref){const c=W(r.$ref),f={name:e,type:"object",description:r.description,required:v,isArray:!1,ref:c};if(!t.has(c)&&d<m){t.add(c);const k=a[c];k&&k.properties&&(f.properties=U(k,a,t,d+1,m)),t.delete(c)}return f}if(r.type==="array"&&r.items){const c={name:e,type:"array",description:r.description,required:v,isArray:!0};if(r.items.$ref){const f=W(r.items.$ref);if(c.ref=f,!t.has(f)&&d<m){t.add(f);const k=a[f];k&&k.properties&&(c.properties=U(k,a,t,d+1,m)),t.delete(f)}}else r.items.type&&(c.items=[{name:"item",type:r.items.type,description:r.items.description,required:!1,isArray:!1}]);return c}if(r.type==="object"&&r.properties)return{name:e,type:"object",description:r.description,required:v,isArray:!1,properties:U(r,a,t,d+1,m)};if(r.additionalProperties){const c={name:e,type:"object (map)",description:r.description,required:v,isArray:!1};if(r.additionalProperties.$ref){const f=W(r.additionalProperties.$ref);c.ref=f}return c}return{name:e,type:r.type||"any",description:r.description,required:v,isArray:!1}}function U(e,r,a,s=0,t=10){if(!e.properties)return[];const d=e.required||[],m=[];for(const[v,c]of Object.entries(e.properties))m.push(Me(v,c,r,d,a,s,t));return m}function Re(e,r){const a=r[e];if(!a)throw new Error(`Definition "${e}" not found`);const s=new Set;return s.add(e),{name:e,description:a.description,type:a.type||"object",properties:U(a,r,s),required:a.required||[]}}function X(e){const r=["io.k8s.api.","io.k8s.","apimachinery.pkg.apis.","kubernetes.pkg."];let a=e;for(const s of r)if(a.startsWith(s)){a=a.replace(s,"");break}return a=a.replace(/\./g,"/"),a}function Te(e){const r=Object.keys(e),a=new Set;for(const s of r){if(s.endsWith("List"))continue;const t=e[s];t.properties&&de(t.properties,a)}return r.filter(s=>!(s.endsWith("List")||a.has(s))).map(s=>X(s)).sort()}function de(e,r){for(const[a,s]of Object.entries(e)){const t=s;t.$ref&&r.add(W(t.$ref)),t.type==="array"&&t.items?.$ref&&r.add(W(t.items.$ref)),t.additionalProperties?.$ref&&r.add(W(t.additionalProperties.$ref)),t.properties&&de(t.properties,r)}}function Ve(e,r){const a=e.replace(/\//g,"."),s=[`io.k8s.api.${a}`,`io.k8s.${a}`,a];for(const t of s)if(r[t])return t;return null}var ze=_('<button class="btn btn-circle shrink-0 btn-ghost btn-xs"><span>â–¼</span></button>'),Be=_('<div class="w-8 shrink-0"></div>'),Ne=_('<span class="badge badge-xs font-bold badge-error">required</span>'),Oe=_('<div class="mt-1 text-sm leading-relaxed wrap-anywhere whitespace-pre-wrap text-base-content/70"> </div>'),We=_('<div class="mt-2 border-l-2 border-base-content/10 pt-2 pl-2"></div>'),Ke=_('<div class="property-item mb-2"><div class="flex items-start gap-2"><!> <div class="min-w-0 flex-1"><div class="mb-1 flex flex-wrap items-center gap-3"><span class="font-mono text-base font-semibold"> </span> <!> <span class="grow justify-self-end text-right font-mono text-xs wrap-anywhere text-base-content/60 italic"> </span></div> <!></div></div> <!></div>');function ve(e,r){le(r,!0);let a=qe(r,"level",3,0),s=te(a()<2);function t(){ae(s,!o(s))}function d(i){return i.isArray&&i.ref?`${X(i.ref)}[]`:i.isArray?"[]":i.ref?X(i.ref):i.type}function m(i){return!!(i.properties&&i.properties.length>0)}var v=Ke(),c=l(v),f=l(c);{var k=i=>{var u=ze();u.__click=t;var z=l(u);let O;n(u),E(()=>{Ae(u,"aria-label",o(s)?"Collapse":"Expand"),O=Pe(z,1,"transition-transform duration-300",null,O,{"-rotate-90":!o(s)})}),p(i,u)},h=i=>{var u=Be();p(i,u)};q(f,i=>{m(r.property)?i(k):i(h,!1)})}var g=b(f,2),M=l(g),R=l(M),K=l(R,!0);n(R);var L=b(R,2);{var T=i=>{var u=Ne();p(i,u)};q(L,i=>{r.property.required&&i(T)})}var A=b(L,2),N=l(A,!0);n(A),n(M);var F=b(M,2);{var G=i=>{var u=Oe(),z=l(u,!0);n(u),E(()=>C(z,r.property.description)),p(i,u)};q(F,i=>{r.property.description&&i(G)})}n(g),n(c);var J=b(c,2);{var H=i=>{var u=We();se(u,21,()=>r.property.properties,ie,(z,O)=>{{let Y=Q(()=>a()+1);ve(z,{get property(){return o(O)},get level(){return o(Y)}})}}),n(u),p(i,u)};q(J,i=>{o(s)&&m(r.property)&&i(H)})}n(v),E(i=>{Le(v,`margin-left: ${a()*.5}rem`),C(K,r.property.name),C(N,i)},[()=>d(r.property)]),p(e,v),ce()}he(["click"]);var Fe=_('<div class="card mb-6 bg-base-100 shadow-xl"><div class="card-body items-center py-16 text-center"><span class="loading loading-lg loading-spinner text-primary"></span> <p class="mt-4 text-lg"> </p></div></div>'),He=_('<div role="alert" class="mb-6 alert alert-error shadow-lg"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),Ie=_("<option> </option>"),Ge=_('<p class="mb-6 whitespace-pre-wrap"> </p>'),Je=_('<div class="overflow-x-auto"></div>'),Qe=_('<div role="alert" class="alert alert-warning"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 shrink-0 stroke-current" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span>No properties defined for this resource.</span></div>'),Ue=_('<div class="card bg-base-100 shadow-xl"><div class="card-body"><h2 class="mb-4 card-title text-xl"><span class="font-mono"> </span></h2> <!> <div class="divider"><span class="text-lg font-semibold">Properties</span></div> <!></div></div>'),Xe=_(`<div class="card bg-base-100 shadow-xl"><div class="card-body items-center py-16 text-center"><div class="mb-6 h-32 w-32 opacity-20"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <h3 class="mb-3 text-2xl font-bold">Select a resource to explore</h3> <p class="max-w-md text-base-content/60">Choose a Kubernetes resource from the dropdown above to view its complete schema with
						all nested properties and descriptions.</p></div></div>`),Ye=_('<div class="card mb-6 bg-base-100 shadow-xl"><div class="card-body"><h2 class="mb-4 card-title text-2xl"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> Select a Resource</h2> <div class="form-control mb-4"><label for="search" class="label"><span class="label-text font-semibold">Search resources</span></label> <input id="search" type="text" placeholder="Type to filter resources..." class="input-bordered input w-full"/></div> <div class="form-control"><label for="resource-select" class="label"><span class="label-text font-semibold">Resource definition</span></label> <select id="resource-select" class="select-bordered select w-full"><option> </option><!></select></div></div></div> <!>',1),Ze=_('<div class="container mx-auto max-w-7xl p-6"><!></div>');function tr(e,r){le(r,!0);let a=te(""),s=te(null),t=Q(()=>{if(o(s)&&V.isLoaded)try{const h=V.getDefinitions(),g=Ve(o(s),h);if(!g)throw new Error(`Could not find definition for "${o(s)}"`);return Re(g,h)}catch{return null}else return null});const d=Q(()=>V.isLoaded?Te(V.getDefinitions()):[]);let m=Q(()=>o(a)?o(d).filter(h=>h.toLowerCase().includes(o(a).toLowerCase())):o(d));var v=Ze(),c=l(v);{var f=h=>{var g=Fe(),M=l(g),R=b(l(M),2),K=l(R);n(R),n(M),n(g),E(()=>C(K,`Loading Kubernetes ${V.selectedVersion??""} API schema...`)),p(h,g)},k=h=>{var g=ne(),M=D(g);{var R=L=>{var T=He(),A=b(l(T),2),N=l(A,!0);n(A),n(T),E(()=>C(N,V.error)),p(L,T)},K=L=>{var T=Ye(),A=D(T),N=l(A),F=b(l(N),2),G=b(l(F),2);Se(G),n(F);var J=b(F,2),H=b(l(J),2),i=l(H),u=l(i);n(i),i.value=(i.__value=null)??"";var z=b(i);se(z,17,()=>o(m),ie,(w,y)=>{var j=Ie(),B=l(j,!0);n(j);var P={};E(()=>{C(B,o(y)),P!==(P=o(y))&&(j.value=(j.__value=o(y))??"")}),p(w,j)}),n(H),n(J),n(N),n(A);var O=b(A,2);{var Y=w=>{var y=Ue(),j=l(y),B=l(j),P=l(B),Z=l(P,!0);n(P),n(B);var oe=b(B,2);{var ue=x=>{var S=Ge(),$=l(S,!0);n(S),E(()=>C($,o(t).description)),p(x,S)};q(oe,x=>{o(t).description&&x(ue)})}var pe=b(oe,4);{var me=x=>{var S=Je();se(S,21,()=>o(t).properties,ie,($,be)=>{ve($,{get property(){return o(be)}})}),n(S),p(x,S)},_e=x=>{var S=Qe();p(x,S)};q(pe,x=>{o(t).properties.length>0?x(me):x(_e,!1)})}n(j),n(y),E(x=>C(Z,x),[()=>X(o(t).name)]),p(w,y)},fe=w=>{var y=ne(),j=D(y);{var B=P=>{var Z=Xe();p(P,Z)};q(j,P=>{o(s)||P(B)},!0)}p(w,y)};q(O,w=>{o(t)?w(Y):w(fe,!1)})}E(()=>C(u,`-- Select a resource (${o(m).length??""}) --`)),Ee(G,()=>o(a),w=>ae(a,w)),Ce(H,()=>o(s),w=>ae(s,w)),p(L,T)};q(M,L=>{V.error?L(R):L(K,!1)},!0)}p(h,g)};q(c,h=>{V.isLoading?h(f):h(k,!1)})}n(v),p(e,v),ce()}export{tr as component};
